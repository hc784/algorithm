# [Gold III] 텀 프로젝트 - 9466 

[문제 링크](https://www.acmicpc.net/problem/9466) 

### 성능 요약

메모리: 2900 KB, 시간: 892 ms

### 분류

그래프 이론, 그래프 탐색, 깊이 우선 탐색

### 제출 일자

2025년 8월 25일 14:51:36

### 문제 설명

<p>이번 가을학기에 '문제 해결' 강의를 신청한 학생들은 텀 프로젝트를 수행해야 한다. 프로젝트 팀원 수에는 제한이 없다. 심지어 모든 학생들이 동일한 팀의 팀원인 경우와 같이 한 팀만 있을 수도 있다. 프로젝트 팀을 구성하기 위해, 모든 학생들은 프로젝트를 함께하고 싶은 학생을 선택해야 한다. (단, 단 한 명만 선택할 수 있다.) 혼자 하고 싶어하는 학생은 자기 자신을 선택하는 것도 가능하다.</p>

<p>학생들이(s<sub>1</sub>, s<sub>2</sub>, ..., s<sub>r</sub>)이라 할 때, r=1이고 s<sub>1</sub>이 s<sub>1</sub>을 선택하는 경우나, s<sub>1</sub>이 s<sub>2</sub>를 선택하고, s<sub>2</sub>가 s<sub>3</sub>를 선택하고,..., s<sub>r-1</sub>이 s<sub>r</sub>을 선택하고, s<sub>r</sub>이 s<sub>1</sub>을 선택하는 경우에만 한 팀이 될 수 있다.</p>

<p>예를 들어, 한 반에 7명의 학생이 있다고 하자. 학생들을 1번부터 7번으로 표현할 때, 선택의 결과는 다음과 같다.</p>

<table class="table table-bordered" style="width:30%">
	<thead>
		<tr>
			<th>1</th>
			<th>2</th>
			<th>3</th>
			<th>4</th>
			<th>5</th>
			<th>6</th>
			<th>7</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>3</td>
			<td>1</td>
			<td>3</td>
			<td>7</td>
			<td>3</td>
			<td>4</td>
			<td>6</td>
		</tr>
	</tbody>
</table>

<p>위의 결과를 통해 (3)과 (4, 7, 6)이 팀을 이룰 수 있다. 1, 2, 5는 어느 팀에도 속하지 않는다.</p>

<p>주어진 선택의 결과를 보고 어느 프로젝트 팀에도 속하지 않는 학생들의 수를 계산하는 프로그램을 작성하라.</p>

### 입력 

 <p>첫째 줄에 테스트 케이스의 개수 T가 주어진다. 각 테스트 케이스의 첫 줄에는 학생의 수가 정수 n (2 ≤ n ≤ 100,000)으로 주어진다. 각 테스트 케이스의 둘째 줄에는 선택된 학생들의 번호가 주어진다. (모든 학생들은 1부터 n까지 번호가 부여된다.)</p>

### 출력 

 <p>각 테스트 케이스마다 한 줄에 출력하고, 각 줄에는 프로젝트 팀에 속하지 못한 학생들의 수를 나타내면 된다.</p>


### 풀이
순환 그래프인 경우에만 팀이 이뤄진다
1. 그래프 만들기
2. 순환 그래프인지 확인하기
확인하는방법?
그래프 연결을 거쳐서 자신에게로 돌아오면 그 사이클에서 거친 노드와 팀이 된다.
각 노드는 하나의 연결만을 가진다.

하나의 연결만 가지면? bfs든 dfs든 같다.
그냥 dfs 하면 될듯.

연결된 노드로 들어간다. visited true하고,
visited true인 곳에 다시 방문된 경우?

근데, 이미 팀이 이뤄진 학생 집단에 하나가 끼는 경우?
집단이 낀 하나를 가리키지 않으면 그건 탈락.
if visited true 인 경우.
그게 현재 사이클에 포함된 앤지, 아니면 이미 만들어진 곳에 낀 건지 판단해야한다.

아직 만들어진 집단이 아닌 경우. 시작 사이클 노드를 다시 가리키게 되면 그건 한팀이 이루어지는거고.
이미 만들어진 집단인 경우 걔들은 포함되지 않음.

한 재귀에서 같은 노드에 한번더 방문하게 된다면 팀을 이룬다. 
false -true -true가 된다면.
각 노드마다 현재 팀이 있는지 여부를 체크하는 상태를 기록.
visited true이고, 이번 재귀에서 visited가 true가 됐는데, 한번더 방문했다면 그 노드는 팀을 이룬다. 팀을 이루지 못한 노드가 없을때까지 반복해서 팀 상태를 갱신한다.

하지만, 이전의 재귀에서 visited가 true가 됐으나, 팀을 이루지 못했다면 현재 사이클의 노드들도 팀을 이루지 못하게 되므로 return.


visited false인 것들을 계속 반복한다.

생성할 것
그래프 배열.
그냥 array로 표현가능.
근데 visited에는 재귀시점을 기록할 수 있도록 int로 만든다.
방문한 재귀 count를 visited에 기록.
아직 방문하지 않았다면 -1
